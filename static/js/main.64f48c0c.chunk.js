(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{14:function(t,a,r){},15:function(t,a,r){},17:function(t,a,r){"use strict";r.r(a);var e=r(2),c=r.n(e),h=r(9),i=r.n(h),s=(r(14),r(3)),n=(r(15),r(4)),o=r(1),A=r(0),p=function(t){return Object(A.jsx)("button",{className:"square "+t.squareTypes[t.squareLoc]+" "+t.backgroundImage,onClick:function(){t.onClickFunction(t.onClickParameters)}})},u="",l="",f=!1,b="",v="",k=[!0,!0],d=[!0,!0];function g(t){return String.fromCharCode(t.charCodeAt(0)+1)}function O(t){return String.fromCharCode(t.charCodeAt(0)-1)}var j={pawns:{a2:[],b2:[],c2:[],d2:[],e2:[],f2:[],g2:[],h2:[]},knights:{b1:[],g1:[]},bishops:{c1:[],f1:[]},rooks:{a1:[],h1:[]},queens:{d1:[]},king:{e1:[]}},m={pawns:{a7:[],b7:[],c7:[],d7:[],e7:[],f7:[],g7:[],h7:[]},knights:{b8:[],g8:[]},bishops:{c8:[],f8:[]},rooks:{a8:[],h8:[]},queens:{d8:[]},king:{e8:[]}},w=function(t){var a;switch(t){case"p":a="pawns";break;case"n":a="knights";break;case"b":a="bishops";break;case"r":a="rooks";break;case"q":a="queens";break;case"k":a="king";break;default:console.log("error: invalid letter")}return a},I=function(t){var a;switch(t){case"pawns":a="p";break;case"knights":a="n";break;case"bishops":a="b";break;case"rooks":a="r";break;case"queens":a="q";break;case"king":a="k";break;default:console.log("error: invalid piece type")}return a},x=function(t,a,r){var e={};for(var c in t[a])c!=r&&(e[c]=t[a].piece);var h=Object(o.a)({},t);return h[a]=e,h},q=function(t,a){var r=Object.keys(t.king)[0];for(var e in a)for(var c in a[e])if(a[e][c].includes(r))return!0;return!1},P=function(t,a){if(q(t,a)){for(var r in t)for(var e in t[r])if(t[r][e].length>0)return!1;return!0}return!1},y=function t(a,r,e,c,h){var i,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=JSON.parse(JSON.stringify(a));i="white"==e?"black":"white";var p,u=function(r,n,A,p){if(!s)return!1;var u=Object(o.a)({},a),l={};for(var f in a[r])f!=n?l[f]=a[r][f]:l[A]=[];u[r]=l;var b=Object(o.a)({},c);b[n]="",b[A]=e.charAt(0)+I(r);var v=t(p,u,i,b,h,!1);return q(u,v)};for(var l in a.pawns){if(p=[],"white"==e){"2"!=l.charAt(1)||""!=c[l.charAt(0)+"3"]||""!=c[l.charAt(0)+"4"]||u("pawns",l,l.charAt(0)+"4",r)||p.push(l.charAt(0)+"4"),""!=c[l.charAt(0)+(parseInt(l.charAt(1))+1)]||u("pawns",l,l.charAt(0)+(parseInt(l.charAt(1))+1),r)||p.push(l.charAt(0)+(parseInt(l.charAt(1))+1));var f=O(l.charAt(0))+(parseInt(l.charAt(1))+1);if("a"!=l.charAt(0)&&"b"==c[f].charAt(0)){var b=x(r,w(c[f].charAt(1)),f);u("pawns",l,f,b)||p.push(f)}var v=g(l.charAt(0))+(parseInt(l.charAt(1))+1);if("h"!=l.charAt(0)&&"b"==c[v].charAt(0)){var j=x(r,w(c[v].charAt(1)),v);u("pawns",l,v,j)||p.push(v)}if("5"==l.charAt(1)&&h.length>0){var m=h[h.length-1];"bp"==m.piece&&"7"==m.initialPos.charAt(1)&&"5"==m.destination.charAt(1)&&(O(l.charAt(0))==m.destination.charAt(0)?p.push("<-x"):g(l.charAt(0))==m.destination.charAt(0)&&p.push("x->"))}}else{"7"!=l.charAt(1)||""!=c[l.charAt(0)+"6"]||""!=c[l.charAt(0)+"5"]||u("pawns",l,l.charAt(0)+"5",r)||p.push(l.charAt(0)+"5"),""!=c[l.charAt(0)+(parseInt(l.charAt(1))-1)]||u("pawns",l,l.charAt(0)+(parseInt(l.charAt(1))-1),r)||p.push(l.charAt(0)+(parseInt(l.charAt(1))-1));var P=O(l.charAt(0))+(parseInt(l.charAt(1))-1);if("a"!=l.charAt(0)&&"w"==c[P].charAt(0)){var y=x(r,w(c[P].charAt(1)),P);u("pawns",l,P,y)||p.push(P)}var C=g(l.charAt(0))+(parseInt(l.charAt(1))-1);if("h"!=l.charAt(0)&&"w"==c[C].charAt(0)){var N=x(r,w(c[C].charAt(1)),C);u("pawns",l,C,N)||p.push(C)}if("4"==l.charAt(1)&&h.length>0){var S=h[h.length-1];"wp"==S.piece&&"2"==S.initialPos.charAt(1)&&"4"==S.destination.charAt(1)&&(O(l.charAt(0))==S.destination.charAt(0)?p.push("<-x"):g(l.charAt(0))==S.destination.charAt(0)&&p.push("x->"))}}A.pawns[l]=Object(n.a)(p)}for(var H in a.rooks){p=[];for(var B=!1,M=1;!B&&parseInt(H.charAt(1))+M<=8;){var E=H.charAt(0)+(parseInt(H.charAt(1))+M);if(""!=c[E]||u("rooks",H,E,r)){if(c[E].charAt(0)==e.charAt(0))B=!0;else if(""!=c[E]){var F=x(r,w(c[E].charAt(1)),E);u("rooks",H,E,F)||p.push(E),B=!0}}else p.push(E);M++}for(B=!1,M=-1;!B&&parseInt(H.charAt(1))+M>=1;){var J=H.charAt(0)+(parseInt(H.charAt(1))+M);if(""!=c[J]||u("rooks",H,J,r)){if(c[J].charAt(0)==e.charAt(0))B=!0;else if(""!=c[J]){var Q=x(r,w(c[J].charAt(1)),J);u("rooks",H,J,Q)||p.push(J),B=!0}}else p.push(J);M--}B=!1;for(var R=O(H.charAt(0));!B&&"a"!=H.charAt(0);){var T=R+parseInt(H.charAt(1));if(""!=c[T]||u("rooks",H,T,r)){if(c[T].charAt(0)==e.charAt(0))B=!0;else if(""!=c[T]){var L=x(r,w(c[T].charAt(1)),T);u("rooks",H,T,L)||p.push(T),B=!0}}else p.push(T);"a"==R?B=!0:R=O(R)}B=!1;for(var K=g(H.charAt(0));!B&&"h"!=H.charAt(0);){var D=K+parseInt(H.charAt(1));if(""!=c[D]||u("rooks",H,D,r)){if(c[D].charAt(0)==e.charAt(0))B=!0;else if(""!=c[D]){var U=x(r,w(c[D].charAt(1)),D);u("rooks",H,D,U)||p.push(D),B=!0}}else p.push(D);"h"==K?B=!0:K=g(K)}A.rooks[H]=Object(n.a)(p)}for(var z in a.bishops){p=[];for(var G=!1,V=1,W=g(z.charAt(0));!G&&parseInt(z.charAt(1))+V<=8&&"h"!=z.charAt(0);){var X=W+(parseInt(z.charAt(1))+V);if(""!=c[X]||u("bishops",z,X,r)){if(c[X].charAt(0)==e.charAt(0))G=!0;else if(""!=c[X]){var Y=x(r,w(c[X].charAt(1)),X);u("bishops",z,X,Y)||p.push(X),G=!0}}else p.push(X);"h"==W?G=!0:(V++,W=g(W))}G=!1,V=1;for(var Z=O(z.charAt(0));!G&&parseInt(z.charAt(1))+V<=8&&"a"!=z.charAt(0);){var $=Z+(parseInt(z.charAt(1))+V);if(""!=c[$]||u("bishops",z,$,r)){if(c[$].charAt(0)==e.charAt(0))G=!0;else if(""!=c[$]){var _=x(r,w(c[$].charAt(1)),$);u("bishops",z,$,_)||p.push($),G=!0}}else p.push($);"a"==Z?G=!0:(V++,Z=O(Z))}for(G=!1,V=-1,W=g(z.charAt(0));!G&&parseInt(z.charAt(1))+V>=1&&"h"!=z.charAt(0);){var tt=W+(parseInt(z.charAt(1))+V);if(""!=c[tt]||u("bishops",z,tt,r)){if(c[tt].charAt(0)==e.charAt(0))G=!0;else if(""!=c[tt]){var at=x(r,w(c[tt].charAt(1)),tt);u("bishops",z,tt,at)||p.push(tt),G=!0}}else p.push(tt);"h"==W?G=!0:(V--,W=g(W))}for(G=!1,V=-1,Z=O(z.charAt(0));!G&&parseInt(z.charAt(1))+V>=1&&"a"!=z.charAt(0);){var rt=Z+(parseInt(z.charAt(1))+V);if(""!=c[rt]||u("bishops",z,rt,r)){if(c[rt].charAt(0)==e.charAt(0))G=!0;else if(""!=c[rt]){var et=x(r,w(c[rt].charAt(1)),rt);u("bishops",z,rt,et)||p.push(rt),G=!0}}else p.push(rt);"a"==Z?G=!0:(V--,Z=O(Z))}A.bishops[z]=Object(n.a)(p)}for(var ct in a.knights){p=[];var ht=void 0;if(parseInt(ct.charAt(1))<7&&"h"!=ct.charAt(0))if(ht=g(ct.charAt(0))+(parseInt(ct.charAt(1))+2),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var it=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,it)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))<7&&"a"!=ct.charAt(0))if(ht=O(ct.charAt(0))+(parseInt(ct.charAt(1))+2),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var st=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,st)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))>2&&"h"!=ct.charAt(0))if(ht=g(ct.charAt(0))+(parseInt(ct.charAt(1))-2),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var nt=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,nt)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))>2&&"a"!=ct.charAt(0))if(ht=O(ct.charAt(0))+(parseInt(ct.charAt(1))-2),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var ot=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,ot)||p.push(ht)}}else p.push(ht);if("8"!=ct.charAt(1)&&"h"!=ct.charAt(0)&&"g"!=ct.charAt(0))if(ht=g(g(ct.charAt(0)))+(parseInt(ct.charAt(1))+1),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var At=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,At)||p.push(ht)}}else p.push(ht);if("8"!=ct.charAt(1)&&"a"!=ct.charAt(0)&&"b"!=ct.charAt(0))if(ht=O(O(ct.charAt(0)))+(parseInt(ct.charAt(1))+1),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var pt=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,pt)||p.push(ht)}}else p.push(ht);if("1"!=ct.charAt(1)&&"h"!=ct.charAt(0)&&"g"!=ct.charAt(0))if(ht=g(g(ct.charAt(0)))+(parseInt(ct.charAt(1))-1),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var ut=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,ut)||p.push(ht)}}else p.push(ht);if("1"!=ct.charAt(1)&&"a"!=ct.charAt(0)&&"b"!=ct.charAt(0))if(ht=O(O(ct.charAt(0)))+(parseInt(ct.charAt(1))-1),""!=c[ht]||u("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var lt=x(r,w(c[ht].charAt(1)),ht);u("knights",ct,ht,lt)||p.push(ht)}}else p.push(ht);A.knights[ct]=Object(n.a)(p)}for(var ft in a.queens){p=[];for(var bt=!1,vt=1;!bt&&parseInt(ft.charAt(1))+vt<=8;){var kt=ft.charAt(0)+(parseInt(ft.charAt(1))+vt);if(""!=c[kt]||u("queens",ft,kt,r)){if(c[kt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[kt]){var dt=x(r,w(c[kt].charAt(1)),kt);u("queens",ft,kt,dt)||p.push(kt),bt=!0}}else p.push(kt);vt++}for(bt=!1,vt=-1;!bt&&parseInt(ft.charAt(1))+vt>=1;){var gt=ft.charAt(0)+(parseInt(ft.charAt(1))+vt);if(""!=c[gt]||u("queens",ft,gt,r)){if(c[gt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[gt]){var Ot=x(r,w(c[gt].charAt(1)),gt);u("queens",ft,gt,Ot)||p.push(gt),bt=!0}}else p.push(gt);vt--}bt=!1;for(var jt=O(ft.charAt(0));!bt&&"a"!=ft.charAt(0);){var mt=jt+parseInt(ft.charAt(1));if(""!=c[mt]||u("queens",ft,mt,r)){if(c[mt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[mt]){var wt=x(r,w(c[mt].charAt(1)),mt);u("queens",ft,mt,wt)||p.push(mt),bt=!0}}else p.push(mt);"a"==jt?bt=!0:jt=O(jt)}bt=!1;for(var It=g(ft.charAt(0));!bt&&"h"!=ft.charAt(0);){var xt=It+parseInt(ft.charAt(1));if(""!=c[xt]||u("queens",ft,xt,r)){if(c[xt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[xt]){var qt=x(r,w(c[xt].charAt(1)),xt);u("queens",ft,xt,qt)||p.push(xt),bt=!0}}else p.push(xt);"h"==It?bt=!0:It=g(It)}for(bt=!1,vt=1,It=g(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt<=8&&"h"!=ft.charAt(0);){var Pt=It+(parseInt(ft.charAt(1))+vt);if(""!=c[Pt]||u("queens",ft,Pt,r)){if(c[Pt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[Pt]){var yt=x(r,w(c[Pt].charAt(1)),Pt);u("queens",ft,Pt,yt)||p.push(Pt),bt=!0}}else p.push(Pt);"h"==It?bt=!0:(vt++,It=g(It))}for(bt=!1,vt=1,jt=O(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt<=8&&"a"!=ft.charAt(0);){var Ct=jt+(parseInt(ft.charAt(1))+vt);if(""!=c[Ct]||u("queens",ft,Ct,r)){if(c[Ct].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[Ct]){var Nt=x(r,w(c[Ct].charAt(1)),Ct);u("queens",ft,Ct,Nt)||p.push(Ct),bt=!0}}else p.push(Ct);"a"==jt?bt=!0:(vt++,jt=O(jt))}for(bt=!1,vt=-1,It=g(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt>=1&&"h"!=ft.charAt(0);){var St=It+(parseInt(ft.charAt(1))+vt);if(""!=c[St]||u("queens",ft,St,r)){if(c[St].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[St]){var Ht=x(r,w(c[St].charAt(1)),St);u("queens",ft,St,Ht)||p.push(St),bt=!0}}else p.push(St);"h"==It?bt=!0:(vt--,It=g(It))}for(bt=!1,vt=-1,jt=O(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt>=1&&"a"!=ft.charAt(0);){var Bt=jt+(parseInt(ft.charAt(1))+vt);if(""!=c[Bt]||u("queens",ft,Bt,r)){if(c[Bt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[Bt]){var Mt=x(r,w(c[Bt].charAt(1)),Bt);u("queens",ft,Bt,Mt)||p.push(Bt),bt=!0}}else p.push(Bt);"a"==jt?bt=!0:(vt--,jt=O(jt))}A.queens[ft]=Object(n.a)(p)}if(0==Object.keys(a.king).length)return A;var Et=Object.keys(a.king)[0];p=[];var Ft=Et.charAt(0)+(parseInt(Et.charAt(1))+1);if(parseInt(Et.charAt(1))<8&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))<8&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Jt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Jt)||p.push(Ft)}if(Ft=Et.charAt(0)+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))>1&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Qt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Qt)||p.push(Ft)}if(Ft=O(Et.charAt(0))+Et.charAt(1),"a"==Et.charAt(0)||""!=c[Ft]||u("king",Et,Ft,r)){if("a"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Rt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Rt)||p.push(Ft)}}else p.push(Ft);if(Ft=g(Et.charAt(0))+Et.charAt(1),"h"==Et.charAt(0)||""!=c[Ft]||u("king",Et,Ft,r)){if("h"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Tt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Tt)||p.push(Ft)}}else p.push(Ft);if(Ft=g(Et.charAt(0))+(parseInt(Et.charAt(1))+1),parseInt(Et.charAt(1))<8&&"h"!=Et.charAt(0)&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))<8&&"h"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Lt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Lt)||p.push(Ft)}if(Ft=O(Et.charAt(0))+(parseInt(Et.charAt(1))+1),parseInt(Et.charAt(1))<8&&"a"!=Et.charAt(0)&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))<8&&"a"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Kt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Kt)||p.push(Ft)}if(Ft=g(Et.charAt(0))+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&"h"!=Et.charAt(0)&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))>1&&"h"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Dt=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Dt)||p.push(Ft)}if(Ft=O(Et.charAt(0))+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&"a"!=Et.charAt(0)&&""==c[Ft]&&!u("king",Et,Ft,r))p.push(Ft);else if(parseInt(Et.charAt(1))>1&&"a"!=Et.charAt(0)&&c[Ft].charAt(0)!=e.charAt(0)&&""!=c[Ft]){var Ut=x(r,w(c[Ft].charAt(1)),Ft);u("king",Et,Ft,Ut)||p.push(Ft)}return u("king",Et,Et,r)||("white"==e&&k[0]&&(""!=c.f1||""!=c.g1||u("king",Et,"f1",r)||u("king",Et,"g1",r)||p.push("O-O")),"white"==e&&k[1]&&(""!=c.d1||""!=c.c1||""!=c.b1||u("king",Et,"d1",r)||u("king",Et,"c1",r)||p.push("O-O-O")),"black"==e&&d[0]&&(""!=c.f8||""!=c.g8||u("king",Et,"f8",r)||u("king",Et,"g8",r)||p.push("O-O")),"black"==e&&d[1]&&(""!=c.d8||""!=c.c8||""!=c.b8||u("king",Et,"d8",r)||u("king",Et,"c8",r)||p.push("O-O-O"))),A.king[Et]=Object(n.a)(p),A},C=function(t,a){j=y(j,m,"white",t,a),m=y(m,j,"black",t,a)},N=function(t,a,r,e,c){var h,i=Object(n.a)(c),s=B(t,a,r,e);return h="O-O"!=s&&"O-O-O"!=s?{initialPos:l,destination:a,piece:u,name:s}:{initialPos:l,destination:s,name:s},i.push(h),i},S=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",e="";return""!=r&&(e+="="+r.toUpperCase()),P(a,t)?e+="#":q(a,t)&&(e+="+"),e},H=function(t,a,r){var e=Object(n.a)(t);e.length>0&&(e[e.length-1].name+=r,a(e))},B=function(t,a,r,e){var c;switch(c="white"==e?"black":"white",u.charAt(1)){case"p":return l.charAt(0)!=a.charAt(0)?"".concat(l.charAt(0),"x").concat(a):a;case"n":for(var h in r.knights)if(h!=l&&r.knights[h].includes(a))return h.charAt(0)==l.charAt(0)?t[a].charAt(0)==c.charAt(0)?"N".concat(l.charAt(1),"x").concat(a):"N".concat(l.charAt(1)).concat(a):t[a].charAt(0)==c.charAt(0)?"N".concat(l.charAt(0),"x").concat(a):"N".concat(l.charAt(0)).concat(a);return t[a].charAt(0)==c.charAt(0)?"Nx".concat(a):"N".concat(a);case"b":for(var i in r.bishops)if(i!=l&&r.bishops[i].includes(a))return i.charAt(0)==l.charAt(0)?t[a].charAt(0)==c.charAt(0)?"B".concat(l.charAt(1),"x").concat(a):"B".concat(l.charAt(1)).concat(a):t[a].charAt(0)==c.charAt(0)?"B".concat(l.charAt(0),"x").concat(a):"B".concat(l.charAt(0)).concat(a);return t[a].charAt(0)==c.charAt(0)?"Bx".concat(a):"B".concat(a);case"r":for(var s in"white"==e&&k[0]&&"h1"==l?k[0]=!1:"white"==e&&k[1]&&"a1"==l?k[1]=!1:"black"==e&&d[0]&&"h8"==l?d[0]=!1:"black"==e&&d[1]&&"a8"==l&&(d[1]=!1),r.rooks)if(s!=l&&r.rooks[s].includes(a))return s.charAt(0)==l.charAt(0)?t[a].charAt(0)==c.charAt(0)?"R".concat(l.charAt(1),"x").concat(a):"R".concat(l.charAt(1)).concat(a):t[a].charAt(0)==c.charAt(0)?"R".concat(l.charAt(0),"x").concat(a):"R".concat(l.charAt(0)).concat(a);return t[a].charAt(0)==c.charAt(0)?"Rx".concat(a):"R".concat(a);case"q":for(var n in r.queens)if(n!=l&&r.queens[n].includes(a))return n.charAt(0)==l.charAt(0)?t[a].charAt(0)==c.charAt(0)?"Q".concat(l.charAt(1),"x").concat(a):"Q".concat(l.charAt(1)).concat(a):t[a].charAt(0)==c.charAt(0)?"Q".concat(l.charAt(0),"x").concat(a):"Q".concat(l.charAt(0)).concat(a);return t[a].charAt(0)==c.charAt(0)?"Qx".concat(a):"Q".concat(a);case"k":return"white"==e&&(k[0]||k[1])?k=[!1,!1]:"black"==e&&(d[0]||d[1])&&(d=[!1,!1]),"e"==l.charAt(0)&&"g"==a.charAt(0)?"O-O":"e"==l.charAt(0)&&"c"==a.charAt(0)?"O-O-O":t[a].charAt(0)==c.charAt(0)?"Kx".concat(a):"K".concat(a)}},M=function(t){var a=Object(s.a)(t,15),r=a[0],e=a[1],c=a[2],h=a[3],i=a[4],n=a[5],A=a[6],p=a[7],I=a[8],x=a[9],q=a[10],P=a[11],y=a[12],B=a[13],M=a[14];if("enabled"!=I){var E,F,J,Q=function(){"white"==e?(E=j,F=m,J="black"):(E=m,F=j,J="white")};Q();var R=Object(o.a)({},i),T=function(){R[l]=R[l].substring(0,R[l].indexOf("-highlighted")),n(R),u="",l=""},L=function(){u=r,l=h,R[h]+="-highlighted",n(R)},K=function(){if("p"==u.charAt(1)){if("white"==e&&"8"==h.charAt(1))return!0;if("black"==e&&"1"==h.charAt(1))return!0}return!1};if("k"==u.charAt(1)){var D=Object.keys(E.king)[0];if("white"==e){if(E.king[D].includes("O-O")&&("g1"==h||"h1"==h)){var U=Object(o.a)({},A);U[l]="",U.h1="",U.g1=u,U.f1="wr",delete E.king[l],E.king.g1=[],delete E.rooks.h1,E.rooks.f1=[],p(U);var z=N(A,h,E,e,P);return C(U,z),Q(),H(z,y,S(E,F)),c(J),T(),void(k=[!1,!1])}if(E.king[D].includes("O-O-O")&&("c1"==h||"a1"==h)){var G=Object(o.a)({},A);G[l]="",G.a1="",G.c1=u,G.d1="wr",delete E.king[l],E.king.c1=[],delete E.rooks.a1,E.rooks.d1=[],p(G);var V=N(A,h,E,e,P);return C(G,V),Q(),H(V,y,S(E,F)),c(J),T(),void(k=[!1,!1])}}else{if(E.king[D].includes("O-O")&&("g8"==h||"h8"==h)){var W=Object(o.a)({},A);W[l]="",W.h8="",W.g8=u,W.f8="br",delete E.king[l],E.king.g8=[],delete E.rooks.h8,E.rooks.f8=[],p(W);var X=N(A,h,E,e,P);return C(W,X),Q(),H(X,y,S(E,F)),c(J),T(),void(d=[!1,!1])}if(E.king[D].includes("O-O-O")&&("c8"==h||"a8"==h)){var Y=Object(o.a)({},A);Y[l]="",Y.a8="",Y.c8=u,Y.d8="br",delete E.king[l],E.king.c8=[],delete E.rooks.a8,E.rooks.d8=[],p(Y);var Z=N(A,h,E,e,P);return C(Y,Z),Q(),H(Z,y,S(E,F)),c(J),T(),void(d=[!1,!1])}}}if("p"==u.charAt(1))if(E.pawns[l].includes("x->")){var $=1;if("b"==u.charAt(0)&&($=-1),h==g(l.charAt(0))+(parseInt(l.charAt(1))+$)){var _=Object(o.a)({},A);_[l]="",_[h]=u;var tt=h.charAt(0)+(parseInt(h.charAt(1))-$);if(_[tt]="","white"==e){var at=Object(o.a)({},B);at.white.push("p"),M(at)}else{var rt=Object(o.a)({},B);rt.black.push("p"),M(rt)}delete E[w(u.charAt(1))][l],E[w(u.charAt(1))][h]=[],delete F[w(A[tt].charAt(1))][tt],p(_);var et=N(A,h,E,e,P);return C(_,et),Q(),H(et,y,S(E,F)),c(J),void T()}}else if(E.pawns[l].includes("<-x")){var ct=1;if("b"==u.charAt(0)&&(ct=-1),h==O(l.charAt(0))+(parseInt(l.charAt(1))+ct)){var ht=Object(o.a)({},A);ht[l]="",ht[h]=u;var it=h.charAt(0)+(parseInt(h.charAt(1))-ct);if(ht[it]="","white"==e){var st=Object(o.a)({},B);st.white.push("p"),M(st)}else{var nt=Object(o.a)({},B);nt.black.push("p"),M(nt)}delete E[w(u.charAt(1))][l],E[w(u.charAt(1))][h]=[],delete F[w(A[it].charAt(1))][it],p(ht);var ot=N(A,h,E,e,P);return C(ht,ot),Q(),H(ot,y,S(E,F)),c(J),void T()}}if(""==r&&""!=u){if(E[w(u.charAt(1))][l].includes(h)){if(K())return f=!1,b=h,v="",q(e.charAt(0)),void x("enabled");var At=Object(o.a)({},A);At[l]="",At[h]=u,delete E[w(u.charAt(1))][l],E[w(u.charAt(1))][h]=[],p(At);var pt=N(A,h,E,e,P);C(At,pt),Q(),H(pt,y,S(E,F)),c(J)}T()}else if(r.charAt(0)==J.charAt(0)&&""!=u){if(E[w(u.charAt(1))][l].includes(h)){if(K())return f=!0,b=h,v=r,q(e.charAt(0)),void x("enabled");var ut=Object(o.a)({},A);if(ut[l]="",ut[h]=u,"white"==e){var lt=Object(o.a)({},B);lt.white.push(A[h].charAt(1)),M(lt)}else{var ft=Object(o.a)({},B);ft.black.push(A[h].charAt(1)),M(ft)}delete E[w(u.charAt(1))][l],E[w(u.charAt(1))][h]=[],delete F[w(r.charAt(1))][h],p(ut);var bt=N(A,h,E,e,P);C(ut,bt),Q(),H(bt,y,S(E,F)),c(J)}T()}else("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))&&""==u?L():("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))&&""!=u&&l==h?T():("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))&&""!=u&&""!=r&&l!=h&&(T(),L())}},E=function(t){for(var a,r,c,h,i=[],n=Object(e.useState)("white"),k=Object(s.a)(n,2),d=k[0],O=k[1],I=!0,x={},q=0;q<8;q++){c="a";for(var P=I,y=0;y<8;y++)r=P?"light-square":"dark-square",x[c+(8-q)]=r,c=g(c),P=!P;I=!I}var B=Object(e.useState)(x),E=Object(s.a)(B,2),F=E[0],J=E[1],Q=Object(e.useState)({a1:"wr",b1:"wn",c1:"wb",d1:"wq",e1:"wk",f1:"wb",g1:"wn",h1:"wr",a2:"wp",b2:"wp",c2:"wp",d2:"wp",e2:"wp",f2:"wp",g2:"wp",h2:"wp",a3:"",b3:"",c3:"",d3:"",e3:"",f3:"",g3:"",h3:"",a4:"",b4:"",c4:"",d4:"",e4:"",f4:"",g4:"",h4:"",a5:"",b5:"",c5:"",d5:"",e5:"",f5:"",g5:"",h5:"",a6:"",b6:"",c6:"",d6:"",e6:"",f6:"",g6:"",h6:"",a7:"bp",b7:"bp",c7:"bp",d7:"bp",e7:"bp",f7:"bp",g7:"bp",h7:"bp",a8:"br",b8:"bn",c8:"bb",d8:"bq",e8:"bk",f8:"bb",g8:"bn",h8:"br"}),R=Object(s.a)(Q,2),T=R[0],L=R[1];C(T,t.moveHistory),Object(e.useEffect)((function(){if(""!=t.promotionPiece){var a,r,e,c=Object(o.a)({},T),h=t.promotionPiece;if("white"==d?(a=j,r=m,e="black"):(a=m,r=j,e="white"),f){if(c[l]="",c[b]=d.charAt(0)+t.promotionPiece,"white"==d){var i=Object(o.a)({},t.material);i.white.push(T[b].charAt(1)),i.white.push(t.promotionPiece),t.setMaterial(i)}else{var s=Object(o.a)({},t.material);s.black.push(T[b].charAt(1)),s.white.push(t.promotionPiece),t.setMaterial(s)}delete a[w(u.charAt(1))][l],a[w(t.promotionPiece)][b]=[],delete r[w(v.charAt(1))][b]}else{if(c[l]="",c[b]=d.charAt(0)+t.promotionPiece,"white"==d){var n=Object(o.a)({},t.material);n.white.push(t.promotionPiece),t.setMaterial(n)}else{var A=Object(o.a)({},t.material);A.white.push(t.promotionPiece),t.setMaterial(A)}delete a[w(u.charAt(1))][l],a[w(t.promotionPiece)][b]=[]}t.setPromotion("disabled"),t.setPromotionPiece("");var p=Object(o.a)({},F);p[l]=p[l].substring(0,p[l].indexOf("-highlighted")),J(p),L(c);var k=N(T,b,a,d,t.moveHistory);C(c,k),"white"==d?(a=j,r=m,e="black"):(a=m,r=j,e="white"),H(k,t.setMoveHistory,S(a,r,h)),O(e),u="",l=""}}),[t.promotionPiece]);for(var K=0;K<8;K++){a=[],c="a";for(var D=0;D<8;D++)h=T[c+(8-K)],a.push(Object(A.jsx)(p,{squareTypes:F,squareLoc:c+(8-K),backgroundImage:h,onClickFunction:M,onClickParameters:[h,d,O,c+(8-K),F,J,T,L,t.promotion,t.setPromotion,t.setPromotionColour,t.moveHistory,t.setMoveHistory,t.material,t.setMaterial]},c+(8-K))),c=g(c);i.push(Object(A.jsx)("div",{className:"board-row",children:a},8-K))}return Object(A.jsx)("div",{className:"board",children:i})},F=function(t){return Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"q promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("q"),t.setPromotion("disabled")}}),Object(A.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"r promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("r"),t.setPromotion("disabled")}}),Object(A.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"n promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("n"),t.setPromotion("disabled")}}),Object(A.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"b promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("b"),t.setPromotion("disabled")}})]})},J=function(t){return Object(e.useEffect)((function(){var a="";if(t.moveHistory.length>0){var r=t.moveHistory.length-1;a=r%2==0?"".concat(r/2+1,".").concat(t.moveHistory[r].name):" ".concat(t.moveHistory[r].name,"</br>")}document.getElementById("move-history").innerHTML+=a,document.getElementById("move-history-wrapper").scrollTop=document.getElementById("move-history-wrapper").scrollHeight}),[t.moveHistory]),Object(A.jsx)("div",{className:"auto-scroll moveHistory",id:"move-history-wrapper",children:Object(A.jsx)("p",{id:"move-history"})})},Q=r(8),R=function(t){var a=Object(e.useState)({white:" ",black:" "}),r=Object(s.a)(a,2),c=r[0],h=r[1],i=Object(e.useState)({white:[],black:[]}),n=Object(s.a)(i,2),o=n[0],p=n[1];return Object(e.useEffect)((function(){var a,r={white:{p:0,n:0,b:0,r:0,q:0},black:{p:0,n:0,b:0,r:0,q:0}},e=Object(Q.a)(t.material.white);try{for(e.s();!(a=e.n()).done;){var c=a.value;r.white[c]++}}catch(k){e.e(k)}finally{e.f()}var i,s=Object(Q.a)(t.material.black);try{for(s.s();!(i=s.n()).done;){var n=i.value;r.black[n]++}}catch(k){s.e(k)}finally{s.f()}console.log("white:"+JSON.stringify(r.white)),console.log("black:"+JSON.stringify(r.black));var o=r.white.p+3*r.white.n+3*r.white.b+5*r.white.r+9*r.white.q,u=r.black.p+3*r.black.n+3*r.black.b+5*r.black.r+9*r.black.q;h(o>u?{white:"+".concat(o-u),black:" "}:u>o?{white:" ",black:"+".concat(u-o)}:{white:" ",black:" "});var l={white:[],black:[]};for(var f in r.white)if(r.white[f]>r.black[f])for(var b=0;b<r.white[f]-r.black[f];b++)l.white.push(Object(A.jsx)("div",{className:"icon w"+f},f+b));else if(r.black[f]>r.white[f])for(var v=0;v<r.black[f]-r.white[f];v++)l.black.push(Object(A.jsx)("div",{className:"icon w"+f},f+v));p(l)}),[t.material]),Object(A.jsxs)("div",{className:"material",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"icon-container",children:o.black})," ",Object(A.jsx)("div",{className:"material-text",children:c.black})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"icon-container",children:o.white})," ",Object(A.jsx)("div",{className:"material-text",children:c.white})]})]})};var T=function(){var t=Object(e.useState)("disabled"),a=Object(s.a)(t,2),r=a[0],c=a[1],h=Object(e.useState)("w"),i=Object(s.a)(h,2),n=i[0],o=i[1],p=Object(e.useState)(""),u=Object(s.a)(p,2),l=u[0],f=u[1],b=Object(e.useState)([]),v=Object(s.a)(b,2),k=v[0],d=v[1],g=Object(e.useState)({white:[],black:[]}),O=Object(s.a)(g,2),j=O[0],m=O[1];return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(J,{moveHistory:k}),Object(A.jsx)(E,{promotion:r,setPromotion:c,promotionPiece:l,setPromotionPiece:f,promotionColour:n,setPromotionColour:o,moveHistory:k,setMoveHistory:d,material:j,setMaterial:m}),Object(A.jsx)(F,{promotion:r,setPromotion:c,promotionPiece:l,setPromotionPiece:f,promotionColour:n,setPromotionColour:o}),Object(A.jsx)(R,{material:j})]})},L=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,18)).then((function(a){var r=a.getCLS,e=a.getFID,c=a.getFCP,h=a.getLCP,i=a.getTTFB;r(t),e(t),c(t),h(t),i(t)}))};i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(T,{})}),document.getElementById("root")),L()}},[[17,1,2]]]);
//# sourceMappingURL=main.64f48c0c.chunk.js.map