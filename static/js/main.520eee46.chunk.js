(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{14:function(t,a,r){},15:function(t,a,r){},17:function(t,a,r){"use strict";r.r(a);var e=r(2),c=r.n(e),h=r(8),i=r.n(h),s=(r(14),r(3)),n=(r(15),r(9)),o=r(4),A=r(1),p=r(0),l=function(t){return Object(p.jsx)("button",{className:"square "+t.squareTypes[t.squareLoc]+" "+t.backgroundImage,onClick:function(){t.onClickFunction(t.onClickParameters)}})},u=r.p+"static/media/public_sound_standard_Move.e26d185c.mp3",f=r.p+"static/media/public_sound_standard_Capture.3871c59a.mp3",b="",v="",d=!1,k="",m="",g=[!0,!0],O=[!0,!0],j="white",w="black";function I(t){return String.fromCharCode(t.charCodeAt(0)+1)}function y(t){return String.fromCharCode(t.charCodeAt(0)-1)}function P(t){this.sound=document.createElement("audio"),this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",this.source=document.createElement("source"),this.source.src=t,this.source.type="audio/mpeg",this.sound.appendChild(this.source),document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}}var x=new P(u),q=new P(f),C={pawns:{a2:[],b2:[],c2:[],d2:[],e2:[],f2:[],g2:[],h2:[]},knights:{b1:[],g1:[]},bishops:{c1:[],f1:[]},rooks:{a1:[],h1:[]},queens:{d1:[]},king:{e1:[]}},N={pawns:{a7:[],b7:[],c7:[],d7:[],e7:[],f7:[],g7:[],h7:[]},knights:{b8:[],g8:[]},bishops:{c8:[],f8:[]},rooks:{a8:[],h8:[]},queens:{d8:[]},king:{e8:[]}},S=function(t){var a;switch(t){case"p":a="pawns";break;case"n":a="knights";break;case"b":a="bishops";break;case"r":a="rooks";break;case"q":a="queens";break;case"k":a="king";break;default:console.log("error: invalid letter")}return a},H=function(t){var a;switch(t){case"pawns":a="p";break;case"knights":a="n";break;case"bishops":a="b";break;case"rooks":a="r";break;case"queens":a="q";break;case"king":a="k";break;default:console.log("error: invalid piece type")}return a},M=function(t,a,r){var e={};for(var c in t[a])c!=r&&(e[c]=t[a].piece);var h=Object(A.a)({},t);return h[a]=e,h},B=function(t,a){var r=Object.keys(t.king)[0];for(var e in a)for(var c in a[e])if(a[e][c].includes(r))return!0;return!1},E=function(t,a){if(B(t,a)){for(var r in t)for(var e in t[r])if(t[r][e].length>0)return!1;return!0}return!1},J=function t(a,r,e,c,h){var i,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],n=JSON.parse(JSON.stringify(a));i="white"==e?"black":"white";var p,l=function(r,n,o,p){if(!s)return!1;var l=Object(A.a)({},a),u={};for(var f in a[r])f!=n?u[f]=a[r][f]:u[o]=[];l[r]=u;var b=Object(A.a)({},c);b[n]="",b[o]=e.charAt(0)+H(r);var v=t(p,l,i,b,h,!1);return B(l,v)};for(var u in a.pawns){if(p=[],"white"==e){"2"!=u.charAt(1)||""!=c[u.charAt(0)+"3"]||""!=c[u.charAt(0)+"4"]||l("pawns",u,u.charAt(0)+"4",r)||p.push(u.charAt(0)+"4"),""!=c[u.charAt(0)+(parseInt(u.charAt(1))+1)]||l("pawns",u,u.charAt(0)+(parseInt(u.charAt(1))+1),r)||p.push(u.charAt(0)+(parseInt(u.charAt(1))+1));var f=y(u.charAt(0))+(parseInt(u.charAt(1))+1);if("a"!=u.charAt(0)&&"b"==c[f].charAt(0)){var b=M(r,S(c[f].charAt(1)),f);l("pawns",u,f,b)||p.push(f)}var v=I(u.charAt(0))+(parseInt(u.charAt(1))+1);if("h"!=u.charAt(0)&&"b"==c[v].charAt(0)){var d=M(r,S(c[v].charAt(1)),v);l("pawns",u,v,d)||p.push(v)}if("5"==u.charAt(1)&&h.length>0){var k=h[h.length-1];"bp"==k.piece&&"7"==k.initialPos.charAt(1)&&"5"==k.destination.charAt(1)&&(y(u.charAt(0))==k.destination.charAt(0)?p.push("<-x"):I(u.charAt(0))==k.destination.charAt(0)&&p.push("x->"))}}else{"7"!=u.charAt(1)||""!=c[u.charAt(0)+"6"]||""!=c[u.charAt(0)+"5"]||l("pawns",u,u.charAt(0)+"5",r)||p.push(u.charAt(0)+"5"),""!=c[u.charAt(0)+(parseInt(u.charAt(1))-1)]||l("pawns",u,u.charAt(0)+(parseInt(u.charAt(1))-1),r)||p.push(u.charAt(0)+(parseInt(u.charAt(1))-1));var m=y(u.charAt(0))+(parseInt(u.charAt(1))-1);if("a"!=u.charAt(0)&&"w"==c[m].charAt(0)){var j=M(r,S(c[m].charAt(1)),m);l("pawns",u,m,j)||p.push(m)}var w=I(u.charAt(0))+(parseInt(u.charAt(1))-1);if("h"!=u.charAt(0)&&"w"==c[w].charAt(0)){var P=M(r,S(c[w].charAt(1)),w);l("pawns",u,w,P)||p.push(w)}if("4"==u.charAt(1)&&h.length>0){var x=h[h.length-1];"wp"==x.piece&&"2"==x.initialPos.charAt(1)&&"4"==x.destination.charAt(1)&&(y(u.charAt(0))==x.destination.charAt(0)?p.push("<-x"):I(u.charAt(0))==x.destination.charAt(0)&&p.push("x->"))}}n.pawns[u]=Object(o.a)(p)}for(var q in a.rooks){p=[];for(var C=!1,N=1;!C&&parseInt(q.charAt(1))+N<=8;){var E=q.charAt(0)+(parseInt(q.charAt(1))+N);if(""!=c[E]||l("rooks",q,E,r)){if(c[E].charAt(0)==e.charAt(0))C=!0;else if(""!=c[E]){var J=M(r,S(c[E].charAt(1)),E);l("rooks",q,E,J)||p.push(E),C=!0}}else p.push(E);N++}for(C=!1,N=-1;!C&&parseInt(q.charAt(1))+N>=1;){var T=q.charAt(0)+(parseInt(q.charAt(1))+N);if(""!=c[T]||l("rooks",q,T,r)){if(c[T].charAt(0)==e.charAt(0))C=!0;else if(""!=c[T]){var F=M(r,S(c[T].charAt(1)),T);l("rooks",q,T,F)||p.push(T),C=!0}}else p.push(T);N--}C=!1;for(var Q=y(q.charAt(0));!C&&"a"!=q.charAt(0);){var R=Q+parseInt(q.charAt(1));if(""!=c[R]||l("rooks",q,R,r)){if(c[R].charAt(0)==e.charAt(0))C=!0;else if(""!=c[R]){var _=M(r,S(c[R].charAt(1)),R);l("rooks",q,R,_)||p.push(R),C=!0}}else p.push(R);"a"==Q?C=!0:Q=y(Q)}C=!1;for(var L=I(q.charAt(0));!C&&"h"!=q.charAt(0);){var G=L+parseInt(q.charAt(1));if(""!=c[G]||l("rooks",q,G,r)){if(c[G].charAt(0)==e.charAt(0))C=!0;else if(""!=c[G]){var K=M(r,S(c[G].charAt(1)),G);l("rooks",q,G,K)||p.push(G),C=!0}}else p.push(G);"h"==L?C=!0:L=I(L)}n.rooks[q]=Object(o.a)(p)}for(var D in a.bishops){p=[];for(var U=!1,z=1,V=I(D.charAt(0));!U&&parseInt(D.charAt(1))+z<=8&&"h"!=D.charAt(0);){var W=V+(parseInt(D.charAt(1))+z);if(""!=c[W]||l("bishops",D,W,r)){if(c[W].charAt(0)==e.charAt(0))U=!0;else if(""!=c[W]){var X=M(r,S(c[W].charAt(1)),W);l("bishops",D,W,X)||p.push(W),U=!0}}else p.push(W);"h"==V?U=!0:(z++,V=I(V))}U=!1,z=1;for(var Y=y(D.charAt(0));!U&&parseInt(D.charAt(1))+z<=8&&"a"!=D.charAt(0);){var Z=Y+(parseInt(D.charAt(1))+z);if(""!=c[Z]||l("bishops",D,Z,r)){if(c[Z].charAt(0)==e.charAt(0))U=!0;else if(""!=c[Z]){var $=M(r,S(c[Z].charAt(1)),Z);l("bishops",D,Z,$)||p.push(Z),U=!0}}else p.push(Z);"a"==Y?U=!0:(z++,Y=y(Y))}for(U=!1,z=-1,V=I(D.charAt(0));!U&&parseInt(D.charAt(1))+z>=1&&"h"!=D.charAt(0);){var tt=V+(parseInt(D.charAt(1))+z);if(""!=c[tt]||l("bishops",D,tt,r)){if(c[tt].charAt(0)==e.charAt(0))U=!0;else if(""!=c[tt]){var at=M(r,S(c[tt].charAt(1)),tt);l("bishops",D,tt,at)||p.push(tt),U=!0}}else p.push(tt);"h"==V?U=!0:(z--,V=I(V))}for(U=!1,z=-1,Y=y(D.charAt(0));!U&&parseInt(D.charAt(1))+z>=1&&"a"!=D.charAt(0);){var rt=Y+(parseInt(D.charAt(1))+z);if(""!=c[rt]||l("bishops",D,rt,r)){if(c[rt].charAt(0)==e.charAt(0))U=!0;else if(""!=c[rt]){var et=M(r,S(c[rt].charAt(1)),rt);l("bishops",D,rt,et)||p.push(rt),U=!0}}else p.push(rt);"a"==Y?U=!0:(z--,Y=y(Y))}n.bishops[D]=Object(o.a)(p)}for(var ct in a.knights){p=[];var ht=void 0;if(parseInt(ct.charAt(1))<7&&"h"!=ct.charAt(0))if(ht=I(ct.charAt(0))+(parseInt(ct.charAt(1))+2),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var it=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,it)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))<7&&"a"!=ct.charAt(0))if(ht=y(ct.charAt(0))+(parseInt(ct.charAt(1))+2),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var st=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,st)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))>2&&"h"!=ct.charAt(0))if(ht=I(ct.charAt(0))+(parseInt(ct.charAt(1))-2),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var nt=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,nt)||p.push(ht)}}else p.push(ht);if(parseInt(ct.charAt(1))>2&&"a"!=ct.charAt(0))if(ht=y(ct.charAt(0))+(parseInt(ct.charAt(1))-2),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var ot=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,ot)||p.push(ht)}}else p.push(ht);if("8"!=ct.charAt(1)&&"h"!=ct.charAt(0)&&"g"!=ct.charAt(0))if(ht=I(I(ct.charAt(0)))+(parseInt(ct.charAt(1))+1),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var At=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,At)||p.push(ht)}}else p.push(ht);if("8"!=ct.charAt(1)&&"a"!=ct.charAt(0)&&"b"!=ct.charAt(0))if(ht=y(y(ct.charAt(0)))+(parseInt(ct.charAt(1))+1),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var pt=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,pt)||p.push(ht)}}else p.push(ht);if("1"!=ct.charAt(1)&&"h"!=ct.charAt(0)&&"g"!=ct.charAt(0))if(ht=I(I(ct.charAt(0)))+(parseInt(ct.charAt(1))-1),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var lt=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,lt)||p.push(ht)}}else p.push(ht);if("1"!=ct.charAt(1)&&"a"!=ct.charAt(0)&&"b"!=ct.charAt(0))if(ht=y(y(ct.charAt(0)))+(parseInt(ct.charAt(1))-1),""!=c[ht]||l("knights",ct,ht,r)){if(c[ht].charAt(0)!=e.charAt(0)&&""!=c[ht]){var ut=M(r,S(c[ht].charAt(1)),ht);l("knights",ct,ht,ut)||p.push(ht)}}else p.push(ht);n.knights[ct]=Object(o.a)(p)}for(var ft in a.queens){p=[];for(var bt=!1,vt=1;!bt&&parseInt(ft.charAt(1))+vt<=8;){var dt=ft.charAt(0)+(parseInt(ft.charAt(1))+vt);if(""!=c[dt]||l("queens",ft,dt,r)){if(c[dt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[dt]){var kt=M(r,S(c[dt].charAt(1)),dt);l("queens",ft,dt,kt)||p.push(dt),bt=!0}}else p.push(dt);vt++}for(bt=!1,vt=-1;!bt&&parseInt(ft.charAt(1))+vt>=1;){var mt=ft.charAt(0)+(parseInt(ft.charAt(1))+vt);if(""!=c[mt]||l("queens",ft,mt,r)){if(c[mt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[mt]){var gt=M(r,S(c[mt].charAt(1)),mt);l("queens",ft,mt,gt)||p.push(mt),bt=!0}}else p.push(mt);vt--}bt=!1;for(var Ot=y(ft.charAt(0));!bt&&"a"!=ft.charAt(0);){var jt=Ot+parseInt(ft.charAt(1));if(""!=c[jt]||l("queens",ft,jt,r)){if(c[jt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[jt]){var wt=M(r,S(c[jt].charAt(1)),jt);l("queens",ft,jt,wt)||p.push(jt),bt=!0}}else p.push(jt);"a"==Ot?bt=!0:Ot=y(Ot)}bt=!1;for(var It=I(ft.charAt(0));!bt&&"h"!=ft.charAt(0);){var yt=It+parseInt(ft.charAt(1));if(""!=c[yt]||l("queens",ft,yt,r)){if(c[yt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[yt]){var Pt=M(r,S(c[yt].charAt(1)),yt);l("queens",ft,yt,Pt)||p.push(yt),bt=!0}}else p.push(yt);"h"==It?bt=!0:It=I(It)}for(bt=!1,vt=1,It=I(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt<=8&&"h"!=ft.charAt(0);){var xt=It+(parseInt(ft.charAt(1))+vt);if(""!=c[xt]||l("queens",ft,xt,r)){if(c[xt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[xt]){var qt=M(r,S(c[xt].charAt(1)),xt);l("queens",ft,xt,qt)||p.push(xt),bt=!0}}else p.push(xt);"h"==It?bt=!0:(vt++,It=I(It))}for(bt=!1,vt=1,Ot=y(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt<=8&&"a"!=ft.charAt(0);){var Ct=Ot+(parseInt(ft.charAt(1))+vt);if(""!=c[Ct]||l("queens",ft,Ct,r)){if(c[Ct].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[Ct]){var Nt=M(r,S(c[Ct].charAt(1)),Ct);l("queens",ft,Ct,Nt)||p.push(Ct),bt=!0}}else p.push(Ct);"a"==Ot?bt=!0:(vt++,Ot=y(Ot))}for(bt=!1,vt=-1,It=I(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt>=1&&"h"!=ft.charAt(0);){var St=It+(parseInt(ft.charAt(1))+vt);if(""!=c[St]||l("queens",ft,St,r)){if(c[St].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[St]){var Ht=M(r,S(c[St].charAt(1)),St);l("queens",ft,St,Ht)||p.push(St),bt=!0}}else p.push(St);"h"==It?bt=!0:(vt--,It=I(It))}for(bt=!1,vt=-1,Ot=y(ft.charAt(0));!bt&&parseInt(ft.charAt(1))+vt>=1&&"a"!=ft.charAt(0);){var Mt=Ot+(parseInt(ft.charAt(1))+vt);if(""!=c[Mt]||l("queens",ft,Mt,r)){if(c[Mt].charAt(0)==e.charAt(0))bt=!0;else if(""!=c[Mt]){var Bt=M(r,S(c[Mt].charAt(1)),Mt);l("queens",ft,Mt,Bt)||p.push(Mt),bt=!0}}else p.push(Mt);"a"==Ot?bt=!0:(vt--,Ot=y(Ot))}n.queens[ft]=Object(o.a)(p)}if(0==Object.keys(a.king).length)return n;var Et=Object.keys(a.king)[0];p=[];var Jt=Et.charAt(0)+(parseInt(Et.charAt(1))+1);if(parseInt(Et.charAt(1))<8&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))<8&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Tt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Tt)||p.push(Jt)}if(Jt=Et.charAt(0)+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))>1&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Ft=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Ft)||p.push(Jt)}if(Jt=y(Et.charAt(0))+Et.charAt(1),"a"==Et.charAt(0)||""!=c[Jt]||l("king",Et,Jt,r)){if("a"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Qt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Qt)||p.push(Jt)}}else p.push(Jt);if(Jt=I(Et.charAt(0))+Et.charAt(1),"h"==Et.charAt(0)||""!=c[Jt]||l("king",Et,Jt,r)){if("h"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Rt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Rt)||p.push(Jt)}}else p.push(Jt);if(Jt=I(Et.charAt(0))+(parseInt(Et.charAt(1))+1),parseInt(Et.charAt(1))<8&&"h"!=Et.charAt(0)&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))<8&&"h"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var _t=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,_t)||p.push(Jt)}if(Jt=y(Et.charAt(0))+(parseInt(Et.charAt(1))+1),parseInt(Et.charAt(1))<8&&"a"!=Et.charAt(0)&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))<8&&"a"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Lt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Lt)||p.push(Jt)}if(Jt=I(Et.charAt(0))+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&"h"!=Et.charAt(0)&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))>1&&"h"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Gt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Gt)||p.push(Jt)}if(Jt=y(Et.charAt(0))+(parseInt(Et.charAt(1))-1),parseInt(Et.charAt(1))>1&&"a"!=Et.charAt(0)&&""==c[Jt]&&!l("king",Et,Jt,r))p.push(Jt);else if(parseInt(Et.charAt(1))>1&&"a"!=Et.charAt(0)&&c[Jt].charAt(0)!=e.charAt(0)&&""!=c[Jt]){var Kt=M(r,S(c[Jt].charAt(1)),Jt);l("king",Et,Jt,Kt)||p.push(Jt)}return l("king",Et,Et,r)||("white"==e&&g[0]&&(""!=c.f1||""!=c.g1||l("king",Et,"f1",r)||l("king",Et,"g1",r)||p.push("O-O")),"white"==e&&g[1]&&(""!=c.d1||""!=c.c1||""!=c.b1||l("king",Et,"d1",r)||l("king",Et,"c1",r)||p.push("O-O-O")),"black"==e&&O[0]&&(""!=c.f8||""!=c.g8||l("king",Et,"f8",r)||l("king",Et,"g8",r)||p.push("O-O")),"black"==e&&O[1]&&(""!=c.d8||""!=c.c8||""!=c.b8||l("king",Et,"d8",r)||l("king",Et,"c8",r)||p.push("O-O-O"))),n.king[Et]=Object(o.a)(p),n},T=function(t,a){C=J(C,N,"white",t,a),N=J(N,C,"black",t,a)},F=function(t,a,r,e,c,h){var i,s=Object(o.a)(h),n=_(t,a,r,e,c);return i="O-O"!=n&&"O-O-O"!=n?{initialPos:v,destination:r,piece:t[a],name:n}:{initialPos:v,destination:n,piece:t[a],name:n},s.push(i),s},Q=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",e="";return""!=r&&(e+="="+r.toUpperCase()),E(a,t)?e+="#":B(a,t)&&(e+="+"),e},R=function(t,a,r){var e=Object(o.a)(t);e.length>0&&(e[e.length-1].name+=r,a(e))},_=function(t,a,r,e,c){var h;switch(h="white"==c?"black":"white",t[a].charAt(1)){case"p":return a.charAt(0)!=r.charAt(0)?"".concat(a.charAt(0),"x").concat(r):r;case"n":for(var i in e.knights)if(i!=a&&e.knights[i].includes(r))return i.charAt(0)==a.charAt(0)?t[r].charAt(0)==h.charAt(0)?"N".concat(a.charAt(1),"x").concat(r):"N".concat(a.charAt(1)).concat(r):t[r].charAt(0)==h.charAt(0)?"N".concat(a.charAt(0),"x").concat(r):"N".concat(a.charAt(0)).concat(r);return t[r].charAt(0)==h.charAt(0)?"Nx".concat(r):"N".concat(r);case"b":for(var s in e.bishops)if(s!=a&&e.bishops[s].includes(r))return s.charAt(0)==a.charAt(0)?t[r].charAt(0)==h.charAt(0)?"B".concat(a.charAt(1),"x").concat(r):"B".concat(a.charAt(1)).concat(r):t[r].charAt(0)==h.charAt(0)?"B".concat(a.charAt(0),"x").concat(r):"B".concat(a.charAt(0)).concat(r);return t[r].charAt(0)==h.charAt(0)?"Bx".concat(r):"B".concat(r);case"r":for(var n in"white"==c&&g[0]&&"h1"==a?g[0]=!1:"white"==c&&g[1]&&"a1"==a?g[1]=!1:"black"==c&&O[0]&&"h8"==a?O[0]=!1:"black"==c&&O[1]&&"a8"==a&&(O[1]=!1),e.rooks)if(n!=a&&e.rooks[n].includes(r))return n.charAt(0)==a.charAt(0)?t[r].charAt(0)==h.charAt(0)?"R".concat(a.charAt(1),"x").concat(r):"R".concat(a.charAt(1)).concat(r):t[r].charAt(0)==h.charAt(0)?"R".concat(a.charAt(0),"x").concat(r):"R".concat(a.charAt(0)).concat(r);return t[r].charAt(0)==h.charAt(0)?"Rx".concat(r):"R".concat(r);case"q":for(var o in e.queens)if(o!=a&&e.queens[o].includes(r))return o.charAt(0)==a.charAt(0)?t[r].charAt(0)==h.charAt(0)?"Q".concat(a.charAt(1),"x").concat(r):"Q".concat(a.charAt(1)).concat(r):t[r].charAt(0)==h.charAt(0)?"Q".concat(a.charAt(0),"x").concat(r):"Q".concat(a.charAt(0)).concat(r);return t[r].charAt(0)==h.charAt(0)?"Qx".concat(r):"Q".concat(r);case"k":return"white"==c&&(g[0]||g[1])?g=[!1,!1]:"black"==c&&(O[0]||O[1])&&(O=[!1,!1]),"e"!=a.charAt(0)||"g"!=r.charAt(0)&&"h"!=r.charAt(0)?"e"!=a.charAt(0)||"c"!=r.charAt(0)&&"a"!=r.charAt(0)?t[r].charAt(0)==h.charAt(0)?"Kx".concat(r):"K".concat(r):"O-O-O":"O-O"}},L=function(t){var a=Object(s.a)(t,18),r=a[0],e=a[1],c=a[2],h=a[3],i=a[4],n=a[5],o=a[6],p=a[7],l=a[8],u=a[9],f=a[10],w=a[11],P=a[12],x=a[13],q=a[14],H=a[15],M=a[16],B=a[17];if("enabled"!=l){var E,J,_,L=function(){"white"==e?(E=C,J=N,_="black"):(E=N,J=C,_="white")};L();var G=Object(A.a)({},i),K=function(){G[v]=G[v].substring(0,G[v].indexOf("-highlighted")),n(G),b="",v=""},D=function(){b=r,v=h,G[h]+="-highlighted",n(G)},U=function(){if("p"==b.charAt(1)){if("white"==e&&"8"==h.charAt(1))return!0;if("black"==e&&"1"==h.charAt(1))return!0}return!1};if("k"==b.charAt(1)){var z=Object.keys(E.king)[0];if("white"==e){if(E.king[z].includes("O-O")&&("g1"==h||"h1"==h)){var V=Object(A.a)({},o);V[v]="",V.h1="",V.g1=b,V.f1="wr",delete E.king[v],E.king.g1=[],delete E.rooks.h1,E.rooks.f1=[],p(V);var W=F(o,v,h,E,e,w);return T(V,W),L(),R(W,P,Q(E,J)),c(_),K(),H.play(),void(g=[!1,!1])}if(E.king[z].includes("O-O-O")&&("c1"==h||"a1"==h)){var X=Object(A.a)({},o);X[v]="",X.a1="",X.c1=b,X.d1="wr",delete E.king[v],E.king.c1=[],delete E.rooks.a1,E.rooks.d1=[],p(X);var Y=F(o,v,h,E,e,w);return T(X,Y),L(),R(Y,P,Q(E,J)),c(_),K(),H.play(),void(g=[!1,!1])}}else{if(E.king[z].includes("O-O")&&("g8"==h||"h8"==h)){var Z=Object(A.a)({},o);Z[v]="",Z.h8="",Z.g8=b,Z.f8="br",delete E.king[v],E.king.g8=[],delete E.rooks.h8,E.rooks.f8=[],p(Z);var $=F(o,v,h,E,e,w);return T(Z,$),L(),R($,P,Q(E,J)),c(_),K(),H.play(),void(O=[!1,!1])}if(E.king[z].includes("O-O-O")&&("c8"==h||"a8"==h)){var tt=Object(A.a)({},o);tt[v]="",tt.a8="",tt.c8=b,tt.d8="br",delete E.king[v],E.king.c8=[],delete E.rooks.a8,E.rooks.d8=[],p(tt);var at=F(o,v,h,E,e,w);return T(tt,at),L(),R(at,P,Q(E,J)),c(_),K(),H.play(),void(O=[!1,!1])}}}if("p"==b.charAt(1))if(E.pawns[v].includes("x->")){var rt=1;if("b"==b.charAt(0)&&(rt=-1),h==I(v.charAt(0))+(parseInt(v.charAt(1))+rt)){var et=Object(A.a)({},o);et[v]="",et[h]=b;var ct=h.charAt(0)+(parseInt(h.charAt(1))-rt);if(et[ct]="","white"==e){var ht=Object(A.a)({},x);ht.white.p++,q(ht)}else{var it=Object(A.a)({},x);it.black.p++,q(it)}delete E[S(b.charAt(1))][v],E[S(b.charAt(1))][h]=[],delete J[S(o[ct].charAt(1))][ct],p(et);var st=F(o,v,h,E,e,w);return T(et,st),L(),R(st,P,Q(E,J)),c(_),K(),void M.play()}}else if(E.pawns[v].includes("<-x")){var nt=1;if("b"==b.charAt(0)&&(nt=-1),h==y(v.charAt(0))+(parseInt(v.charAt(1))+nt)){var ot=Object(A.a)({},o);ot[v]="",ot[h]=b;var At=h.charAt(0)+(parseInt(h.charAt(1))-nt);if(ot[At]="","white"==e){var pt=Object(A.a)({},x);pt.white.p++,q(pt)}else{var lt=Object(A.a)({},x);lt.black.p++,q(lt)}delete E[S(b.charAt(1))][v],E[S(b.charAt(1))][h]=[],delete J[S(o[At].charAt(1))][At],p(ot);var ut=F(o,v,h,E,e,w);return T(ot,ut),L(),R(ut,P,Q(E,J)),c(_),K(),void M.play()}}if(""==r&&""!=b){if(E[S(b.charAt(1))][v].includes(h)){if(U())return d=!1,k=h,m="",f(e.charAt(0)),void u("enabled");var ft=Object(A.a)({},o);ft[v]="",ft[h]=b,delete E[S(b.charAt(1))][v],E[S(b.charAt(1))][h]=[],p(ft);var bt=F(o,v,h,E,e,w);T(ft,bt),L(),R(bt,P,Q(E,J)),c(_),H.play()}K()}else if(r.charAt(0)==_.charAt(0)&&""!=b){if(E[S(b.charAt(1))][v].includes(h)){if(U())return d=!0,k=h,m=r,f(e.charAt(0)),void u("enabled");var vt=Object(A.a)({},o);if(vt[v]="",vt[h]=b,"white"==e){var dt=Object(A.a)({},x);dt.white[o[h].charAt(1)]++,q(dt)}else{var kt=Object(A.a)({},x);kt.black[o[h].charAt(1)]++,q(kt)}delete E[S(b.charAt(1))][v],E[S(b.charAt(1))][h]=[],delete J[S(r.charAt(1))][h],p(vt);var mt=F(o,v,h,E,e,w);T(vt,mt),L(),R(mt,P,Q(E,J)),c(_),M.play()}K()}else"Self Play"!=B&&e!=j||!("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))||""!=b?"Self Play"!=B&&e!=j||!("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))||""==b||v!=h?"Self Play"!=B&&e!=j||!("white"==e&&"w"==r.charAt(0)||"black"==e&&"b"==r.charAt(0))||""==b||""==r||v==h||(K(),D()):K():D()}},G=function(t){for(var a,r,c,h,i=[],u=Object(e.useState)("white"),f=Object(s.a)(u,2),j=f[0],y=f[1],P=!0,H={},M=0;M<8;M++){c="a";for(var B=P,E=0;E<8;E++)r=B?"light-square":"dark-square",H[c+(8-M)]=r,c=I(c),B=!B;P=!P}var J=Object(e.useState)(H),_=Object(s.a)(J,2),G=_[0],K=_[1],D=Object(e.useState)({a1:"wr",b1:"wn",c1:"wb",d1:"wq",e1:"wk",f1:"wb",g1:"wn",h1:"wr",a2:"wp",b2:"wp",c2:"wp",d2:"wp",e2:"wp",f2:"wp",g2:"wp",h2:"wp",a3:"",b3:"",c3:"",d3:"",e3:"",f3:"",g3:"",h3:"",a4:"",b4:"",c4:"",d4:"",e4:"",f4:"",g4:"",h4:"",a5:"",b5:"",c5:"",d5:"",e5:"",f5:"",g5:"",h5:"",a6:"",b6:"",c6:"",d6:"",e6:"",f6:"",g6:"",h6:"",a7:"bp",b7:"bp",c7:"bp",d7:"bp",e7:"bp",f7:"bp",g7:"bp",h7:"bp",a8:"br",b8:"bn",c8:"bb",d8:"bq",e8:"bk",f8:"bb",g8:"bn",h8:"br"}),U=Object(s.a)(D,2),z=U[0],V=U[1];T(z,t.moveHistory),Object(e.useEffect)((function(){if(""!=t.promotionPiece){var a,r,e,c=Object(A.a)({},z),h=t.promotionPiece;if("white"==j?(a=C,r=N,e="black"):(a=N,r=C,e="white"),d){if(c[v]="",c[k]=j.charAt(0)+t.promotionPiece,"white"==j){var i=Object(A.a)({},t.material);i.white[z[k].charAt(1)]++,i.white[t.promotionPiece]++,t.setMaterial(i)}else{var s=Object(A.a)({},t.material);s.black[z[k].charAt(1)]++,s.black[t.promotionPiece]++,t.setMaterial(s)}delete a[S(b.charAt(1))][v],a[S(t.promotionPiece)][k]=[],delete r[S(m.charAt(1))][k],q.play()}else{if(c[v]="",c[k]=j.charAt(0)+t.promotionPiece,"white"==j){var n=Object(A.a)({},t.material);n.white[t.promotionPiece]++,t.setMaterial(n)}else{var o=Object(A.a)({},t.material);o.black[t.promotionPiece]++,t.setMaterial(o)}delete a[S(b.charAt(1))][v],a[S(t.promotionPiece)][k]=[],x.play()}t.setPromotion("disabled"),t.setPromotionPiece("");var p=Object(A.a)({},G);p[v]=p[v].substring(0,p[v].indexOf("-highlighted")),K(p),V(c);var l=F(z,v,k,a,j,t.moveHistory);T(c,l),"white"==j?(a=C,r=N,e="black"):(a=N,r=C,e="white"),R(l,t.setMoveHistory,Q(a,r,h)),y(e),b="",v=""}}),[t.promotionPiece]),Object(e.useEffect)((function(){if("AI"==t.gamemode&&j==w){var a;JSON.parse(JSON.stringify(C)),a=JSON.parse(JSON.stringify(N)),Object(o.a)(g),Object(o.a)(O);Object(A.a)({},z),JSON.parse(JSON.stringify(t.material)),Object(o.a)(t.moveHistory);var r=[];for(var e in a)for(var c in a[e]){var h,i=Object(n.a)(a[e][c]);try{for(i.s();!(h=i.n()).done;){var s=h.value;r.push({pieceType:e,initialPos:c,destination:s})}}catch(u){i.e(u)}finally{i.f()}}if(r.length>0){var p=r[Math.floor(Math.random()*r.length)],l=Object(A.a)({},G);b=z[p.initialPos],v=p.initialPos,l[p.initialPos]+="-highlighted",L([z[p.destination],w,y,p.destination,l,K,z,V,t.promotion,t.setPromotion,t.setPromotionColour,t.moveHistory,t.setMoveHistory,t.material,t.setMaterial,x,q,t.gamemode])}}}),[t.gamemode,j]);for(var W=0;W<8;W++){a=[],c="a";for(var X=0;X<8;X++)h=z[c+(8-W)],a.push(Object(p.jsx)(l,{squareTypes:G,squareLoc:c+(8-W),backgroundImage:h,onClickFunction:L,onClickParameters:[h,j,y,c+(8-W),G,K,z,V,t.promotion,t.setPromotion,t.setPromotionColour,t.moveHistory,t.setMoveHistory,t.material,t.setMaterial,x,q,t.gamemode]},c+(8-W))),c=I(c);i.push(Object(p.jsx)("div",{className:"board-row",children:a},8-W))}return Object(p.jsx)("div",{className:"board",children:i})},K=function(t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"q promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("q"),t.setPromotion("disabled")}}),Object(p.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"r promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("r"),t.setPromotion("disabled")}}),Object(p.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"n promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("n"),t.setPromotion("disabled")}}),Object(p.jsx)("button",{className:"square light-square ".concat(t.promotionColour,"b promotion ")+t.promotion,onClick:function(){t.setPromotionPiece("b"),t.setPromotion("disabled")}})]})},D=function(t){return Object(e.useEffect)((function(){var a="";if(t.moveHistory.length>0){var r=t.moveHistory.length-1;a=r%2==0?"".concat(r/2+1,".").concat(t.moveHistory[r].name):" ".concat(t.moveHistory[r].name,"</br>")}document.getElementById("move-history").innerHTML+=a,document.getElementById("move-history-wrapper").scrollTop=document.getElementById("move-history-wrapper").scrollHeight}),[t.moveHistory]),Object(p.jsx)("div",{className:"auto-scroll moveHistory",id:"move-history-wrapper",children:Object(p.jsx)("p",{id:"move-history"})})},U=function(t){var a=Object(e.useState)({white:" ",black:" "}),r=Object(s.a)(a,2),c=r[0],h=r[1],i=Object(e.useState)({white:[],black:[]}),n=Object(s.a)(i,2),o=n[0],A=n[1];return Object(e.useEffect)((function(){var a=t.material,r=a.white.p+3*a.white.n+3*a.white.b+5*a.white.r+9*a.white.q,e=a.black.p+3*a.black.n+3*a.black.b+5*a.black.r+9*a.black.q;h(r>e?{white:"+".concat(r-e),black:" "}:e>r?{white:" ",black:"+".concat(e-r)}:{white:" ",black:" "});var c={white:[],black:[]};for(var i in a.white)if(a.white[i]>a.black[i])for(var s=0;s<a.white[i]-a.black[i];s++)c.white.push(Object(p.jsx)("div",{className:"icon w"+i},i+s));else if(a.black[i]>a.white[i])for(var n=0;n<a.black[i]-a.white[i];n++)c.black.push(Object(p.jsx)("div",{className:"icon w"+i},i+n));A(c)}),[t.material]),Object(p.jsxs)("div",{className:"material",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"icon-container",children:o.black})," ",Object(p.jsx)("div",{className:"material-text",children:c.black})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"icon-container",children:o.white})," ",Object(p.jsx)("div",{className:"material-text",children:c.white})]})]})},z=function(t){return Object(p.jsxs)("div",{className:"gamemode-selector-div",children:[Object(p.jsx)("p",{children:"Set gamemode to:"}),Object(p.jsx)("button",{className:"gamemode-selector",onClick:function(){"Self Play"==t.gamemode?t.setGamemode("AI"):t.setGamemode("Self Play")},children:"Self Play"==t.gamemode?"AI":"Self Play"})]})};var V=function(){var t=Object(e.useState)("disabled"),a=Object(s.a)(t,2),r=a[0],c=a[1],h=Object(e.useState)("w"),i=Object(s.a)(h,2),n=i[0],o=i[1],A=Object(e.useState)(""),l=Object(s.a)(A,2),u=l[0],f=l[1],b=Object(e.useState)([]),v=Object(s.a)(b,2),d=v[0],k=v[1],m=Object(e.useState)({white:{p:0,n:0,b:0,r:0,q:0},black:{p:0,n:0,b:0,r:0,q:0}}),g=Object(s.a)(m,2),O=g[0],j=g[1],w=Object(e.useState)("AI"),I=Object(s.a)(w,2),y=I[0],P=I[1];return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(D,{moveHistory:d}),Object(p.jsx)(G,{promotion:r,setPromotion:c,promotionPiece:u,setPromotionPiece:f,promotionColour:n,setPromotionColour:o,moveHistory:d,setMoveHistory:k,material:O,setMaterial:j,gamemode:y}),Object(p.jsx)(K,{promotion:r,setPromotion:c,promotionPiece:u,setPromotionPiece:f,promotionColour:n,setPromotionColour:o}),Object(p.jsx)(U,{material:O}),Object(p.jsx)(z,{gamemode:y,setGamemode:P})]})},W=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,18)).then((function(a){var r=a.getCLS,e=a.getFID,c=a.getFCP,h=a.getLCP,i=a.getTTFB;r(t),e(t),c(t),h(t),i(t)}))};i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(V,{})}),document.getElementById("root")),W()}},[[17,1,2]]]);
//# sourceMappingURL=main.520eee46.chunk.js.map